<template>

<div>

     <nav class="panel column is-offset-2 is-8">
      <p class="panel-heading">
        VueJS Phonebook

        <button class="button is-primary is-outlined is-pulled-right is-clearfix" @click="openAdd">
          Add New
        </button>

        <div class="is-clearfix"></div>
      </p>
      <div class="panel-block">
        <p class="control has-icons-left">
          <input class="input is-small" type="text" placeholder="search">
          <span class="icon is-small is-left">
            <i class="fas fa-search"></i>
          </span>
        </p>
      </div>

      <a v-for="item in items" class="panel-block">
        
        <span class="column is-9">
            {{ item.id }}: {{ item.name }}
        </span>

        <span class="panel-icon column is-1">
            <i class="has-text-danger fa fa-trash-o" aria-hidden="true"></i>
        </span>
        <span class="panel-icon column is-1">
            <i class="has-text-info fa fa-edit" aria-hidden="true"></i>
        </span>
        <span class="panel-icon column is-1">
            <i class="has-text-primary fa fa-eye" aria-hidden="true"></i>
        </span>
        
      </a>

      <div class="panel-block">
        <button class="button is-link is-outlined is-fullwidth">
          reset all filters
        </button>
      </div>
    </nav>


    <Add :openModal="addActive" @closeRequest='close'></Add>

</div>

</template>


<script>

let Add = require('./Add.vue');

export default { 
    
    data() { 

        return {
            addActive: '',
            items: []
        }
    }, 

    components: { Add }, 

    methods: {
        openAdd() { 
            this.addActive = 'is-active';
        }, 

        close() { 
            this.addActive = '';

        }, 

        fetchAll() {
            
            var $component = this;
                
            // Optionally the request above could also be done as
            axios.get('/phonebook', { params: { ID: 12345 } }).then(function (response) {
                    console.log(response.data);
                    $component.items = response.data;
               })
               .catch(function (error) {
                    console.log(error);
                });
        }
    }, 

    created() { 

        console.log('Home created()...');
        this.fetchAll();
    }
}

</script>
